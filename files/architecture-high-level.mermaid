%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#1E3A5F', 'primaryTextColor': '#fff', 'primaryBorderColor': '#1E3A5F', 'lineColor': '#2C5282', 'secondaryColor': '#3182CE', 'tertiaryColor': '#E2E8F0'}}}%%
graph TB
    subgraph CLOUD["â˜ï¸ CLOUD LAYER (Optional)"]
        CD[("ğŸ–¥ï¸ Cloud Dashboard<br/>Multi-Site Management")]
        AN[("ğŸ“Š Analytics Engine<br/>Predictive Insights")]
        BK[("ğŸ’¾ Backup Storage<br/>Data Sync")]
    end
    
    subgraph APP["âš™ï¸ APPLICATION LAYER"]
        API[["ğŸ”Œ API Gateway<br/>REST + GraphQL"]]
        BE[["ğŸ–§ Backend Services<br/>Node.js/Express"]]
        RT[["ğŸ“¡ Real-time Engine<br/>Socket.IO"]]
        MQ[["ğŸ“¨ Message Queue<br/>Redis/RabbitMQ"]]
        DB[("ğŸ—„ï¸ PostgreSQL<br/>Primary Database")]
    end
    
    subgraph EDGE["ğŸ¢ EDGE LAYER (On-Premise)"]
        CAM1["ğŸ“¹ IP Cameras<br/>Zone A"]
        CAM2["ğŸ“¹ IP Cameras<br/>Zone B"]
        CAM3["ğŸ“¹ IP Cameras<br/>Zone C"]
        
        ES[["ğŸ¤– Edge Inference Server<br/>Intel OpenVINO + DL Streamer"]]
        
        LDB[("ğŸ’¾ Local DB<br/>Offline State")]
        
        GW[["ğŸš§ Gateway Controller<br/>Hardware Integration"]]
        
        BAR["ğŸšª Boom Barriers"]
        LED["ğŸ“º LED Displays"]
        TKT["ğŸ« Ticket Printers"]
    end
    
    subgraph USER["ğŸ‘¥ USER INTERFACES"]
        WEB["ğŸŒ Admin Dashboard<br/>Next.js"]
        MOB["ğŸ“± Mobile Apps<br/>React Native"]
        KIO["ğŸ“º Digital Signage<br/>Kiosk Mode"]
    end
    
    CAM1 & CAM2 & CAM3 --> ES
    ES --> LDB
    ES --> MQ
    ES --> GW
    GW --> BAR & LED & TKT
    
    MQ <--> BE
    BE <--> DB
    BE <--> RT
    API <--> BE
    
    API --> CD
    BE --> AN
    DB --> BK
    
    WEB & MOB & KIO --> API
    RT --> WEB & MOB & KIO
    
    classDef cloudStyle fill:#E6F3FF,stroke:#1E3A5F,stroke-width:2px
    classDef appStyle fill:#F0FFF4,stroke:#2C5282,stroke-width:2px
    classDef edgeStyle fill:#FFF5E6,stroke:#DD6B20,stroke-width:2px
    classDef userStyle fill:#F0F4FF,stroke:#3182CE,stroke-width:2px
